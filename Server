package Final;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Random;

public class Server {

	public static void main(String[] args) throws IOException {
		ServerSocket serverSocket = new ServerSocket(1234);
		Random rand = new Random();
		
		System.out.println("Waiting for connections...");
		
		while (true) {
			Socket connectionSocket = serverSocket.accept();

			BufferedReader br = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
			DataOutputStream os = new DataOutputStream(connectionSocket.getOutputStream());
			
			String clientMessage = br.readLine();
			String[] array = clientMessage.split(" ");
			
			//for loop code block influenced by https://www.journaldev.com/32661/shuffle-array-java
			for (int i = 0; i < array.length; i++) {
				int randIndex = rand.nextInt(array.length);
				String temp = array[randIndex];
				array[randIndex] = array[i];
				array[i] = temp;
			}
			
			int randomInt = rand.nextInt(100);
			if (randomInt > 80) {
				array[rand.nextInt(array.length)] = "";
			}
			
			os.writeBytes(array.toString());
			
		}
		
	}
	
}
